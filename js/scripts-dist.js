$(document).ready(function(){function e(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var i=document.createElement("div");i.style.width="100%",e.appendChild(i);var s=i.offsetWidth;return e.parentNode.removeChild(e),t-s}function t(){Modernizr.mq("(min-width: 668px)")||g.hasClass("active")?p.show():p.hide()}function i(){$(this).hasClass("range")||$(this).parent().find(".sod_list_wrapper").css("top",-$(this).parent().find(".sod_option.selected").position().top),$(this).val()?$(this).parent().addClass("selected"):$(this).parent().removeClass("selected")}function s(){if(S.length){var e=S.offset().top-57;$(window).on("scroll",function(){$(window).scrollTop()>e?S.addClass("sticky"):S.removeClass("sticky")})}}function n(){var e=$(".gallery-main .swiper-slide"),t=$(".gallery");$(".gallery-thumbs .nano-content");e.on("click",function(){Modernizr.mq("(min-width: 668px)")&&($("html").css("overflow","hidden"),t.addClass("fullscreen-new"),B.update(!0),window.dispatchEvent(new Event("resize")))});var i=$(".gallery-close");i.on("click",function(){$("html").css("overflow",""),t.removeClass("fullscreen-new"),window.dispatchEvent(new Event("resize"))}),setTimeout(function(){window.dispatchEvent(new Event("resize"))},10)}function o(){var e=$(".gallery-main").find(".swiper-slide-active").data("swiper-slide-index");H.text(e+1+"/"+(B.slides.length-2))}function l(){Modernizr.mq("(min-width: 1023px)")?L.css("height",$(window).height()-150):L.css("height","")}function a(){var e=$(".swiper-slide-active .a-review").height();$(".a-reviews-slider").css("height",e)}function r(){Modernizr.mq("(min-width: 668px)")?(O.css({height:$(window).height()-f.height()-40}),Y.css({"margin-top":$(window).height()-40})):(O.css({height:$(window).height()-f.height()}),Y.css({"margin-top":$(window).height()}))}function c(){var e=$(".m-aside"),t=$(this).find("li").eq(0).height();Modernizr.mq("(min-width: 1280px)")?$(this).css("max-height",e.height()-60):Modernizr.mq("(min-width: 668px)")?$(this).css("max-height",2*t+22):$(this).css("max-height",4*t+66)}FastClick.attach(document.body),$("input, textarea").placeholder(),$("input[type=tel]").mask("+9 (999) 999-99-99"),$("input[type=tel]").on("focus",function(){$(this).addClass("ie-tel")}),$("input[type=tel]").on("change keyup paste",function(){$(this).removeClass("ie-tel")}),$(".validate-form").validate({errorClass:"invalid",validClass:"valid",errorElement:"span",wrapper:"em",onfocusout:function(e){$(e).valid()},highlight:function(e,t,i){$(e).addClass(t).removeClass(i),$(e).parent().addClass(t).removeClass(i)},unhighlight:function(e,t,i){$(e).removeClass(t).addClass(i),$(e).parent().removeClass(t).addClass(i)},ignore:".ignore"});var d=$("input, textarea");d.on("focus blur",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),d.each(function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")});var h=$(".m-content-cover__play");$("html").hasClass("supports")||h.addClass("visible"),h.on("click",function(){$(this).removeClass("visible").prev("video").get(0).play()});var f=$("header"),m=$("#h-burger"),v=$("#h-burger-nav");m.on("click",function(){if(f.toggleClass("active"),$(this).toggleClass("active"),v.toggleClass("active"),$(this).hasClass("active")&&Modernizr.mq("(max-width: 667px)")){$(document).on("touchmove",function(e){e.preventDefault()});var e=!1;$("body").on("touchstart","nav",function(t){e||(e=!0,0===t.currentTarget.scrollTop?t.currentTarget.scrollTop=1:t.currentTarget.scrollHeight===t.currentTarget.scrollTop+t.currentTarget.offsetHeight&&(t.currentTarget.scrollTop-=1),e=!1)}),$("body").on("touchmove","nav",function(e){e.stopPropagation()})}else $(document).unbind("touchmove")}),$("html").hasClass("no-touch")&&v.perfectScrollbar();var g=$("#m-burger"),p=$("#m-burger-nav");t(),g.on("click",function(){$(this).toggleClass("active"),p.slideToggle()}),$(window).on("resize",t);var w=$("main"),u=$("#m-aside-toggle"),C=$(".m-aside");u.on("click",function(){$(this).hasClass("active")?$(this).removeClass("active").text("Свернуть"):$(this).addClass("active").text("Показать"),C.toggleClass("hidden"),w.toggleClass("aside-yes aside-no"),setTimeout(function(){window.dispatchEvent(new Event("resize"))},500)});var x=$(".m-header-sections").find("a.active"),y=$(".m-header-search-toggle");y.on("click",function(e){$(this).toggleClass("active"),x.toggleClass("inactive"),e.preventDefault()});var b=$(".nano");b.nanoScroller({preventPageScrolling:!0}),$(".wrapper select:not(.m-filter-toggle-switchy)").selectOrDie({size:5,onChange:i}),$(".sod_select").on("click",function(){$(this).find("select").hasClass("range")||$(this).find(".sod_list_wrapper").css("top",-$(this).find(".sod_option.selected").position().top)}),$(".wrapper select:not(.m-filter-toggle-switchy)").each(function(){$(this).val()?$(this).parent().addClass("selected"):$(this).parent().removeClass("selected")});var k=$(".m-filter-range");k.each(function(){var e=$(this).find(".m-filter-range-field"),t=($(this).find(".range"),$(this).find(".range-from")),i=$(this).find(".range-to"),s=$(this).find(".sod_select");e.on("click",function(){$(this).hasClass("active")?($(".m-filter-range-field").removeClass("active"),$(".sod_select").removeClass("visible"),s.removeClass("visible")):($(".m-filter-range-field").removeClass("active"),$(this).addClass("active"),$(".sod_select").removeClass("visible"),s.addClass("visible")),s.removeClass("touch")}),t.on("change",function(){e.find(".from").text($(this).find("option:selected").text())}),i.on("change",function(){e.find(".to").text($(this).find("option:selected").text()),s.removeClass("visible")}),e.find(".from").text(t.find("option:selected").text()),e.find(".to").text(i.find("option:selected").text())});var z=$(".m-filters-more"),T=$(".m-mobile-hidden");z.on("click",function(){$(this).toggleClass("active"),T.slideToggle(),$(this).text($(this).hasClass("active")?"Меньше параметров":"Больше параметров")}),$(window).on("resize",function(){Modernizr.mq("(min-width: 960px)")?(M.slideDown(),T.slideDown()):q.hasClass("active")||M.css("display","none")});var q=$(".m-aside-tabs").find("a"),M=$(".m-aside-tabs-content");q.on("click",function(e){$(this).hasClass("active")?(q.removeClass("active"),M.slideUp()):($(this).addClass("active").siblings().removeClass("active"),M.slideUp(),$($(this).attr("href")).slideToggle(),$("html, body").animate({scrollTop:$(".m-aside").offset().top-44},500)),e.preventDefault()});var S=$(".m-aside-tabs");$(".m-catalog");s(),$(window).on("resize",s);var _=$(".m-filters-tip-close");_.on("click",function(){$(this).parent(".m-filters-tip").addClass("hidden")});var D=$(".scroll-btn"),E=$("html, body");D.on("click",function(e){E.animate({scrollTop:$($(this).attr("href")).offset().top-100},800),e.preventDefault()});var B=new Swiper(".gallery-main",{loop:!0,loopedSlides:1,resistanceRatio:0,prevButton:".gallery-nav-btn-prev",nextButton:".gallery-nav-btn-next"});n(),$(window).on("resize",function(){if(Modernizr.mq("(max-width: 589px)")){var e=$(".gallery");$("html").css("overflow",""),e.removeClass("fullscreen")}});var P=$(".gallery-thumbs"),U=P.find(".thumb"),H=$(".gallery-counter");P.length&&(B.on("onSlideChangeStart",function(e){var t=$(".gallery-main").find(".swiper-slide-active").data("swiper-slide-index");U.eq(t).addClass("active").siblings().removeClass("active"),U.eq(t).attr("id","active-thumb").siblings().attr("id",""),P.find(".nano-content").stop().animate({scrollTop:$("#active-thumb").get(0).offsetTop-10,scrollLeft:$("#active-thumb").get(0).offsetLeft-10},500,"swing"),o()}),U.on("click",function(){var e=$(this).index();B.slideTo(e+1)}),o());var L=$(".gallery");l(),$(window).on("resize",l);var R=$(".tile-slider");R.each(function(){var e=new Swiper(this,{loop:!0,nextButton:$(this).parent().find(".tile-slider-next")[0],prevButton:$(this).parent().find(".tile-slider-prev")[0]});$(window).on("resize",function(){setTimeout(function(){e.onResize()},500)})});var W=$("section").find("h2"),j=$("section").find(".s-content");Modernizr.mq("(min-width: 668px)")?j.show():j.hide(),W.on("click",function(){Modernizr.mq("(min-width: 668px)")||($(this).toggleClass("active"),$(this).next(".s-content").slideToggle())}),$(window).on("resize",function(){Modernizr.mq("(min-width: 668px)")?j.show():j.hide()});var F=$("#infotext-toggle"),I=$("#infotext-content");F.on("click",function(e){$(this).hasClass("active")?($(this).removeClass("active").find("u").text("Читать далее"),I.slideUp()):($(this).addClass("active").find("u").text("Свернуть"),I.slideDown()),e.preventDefault()});var N=$(".a-reviews-slider");new Swiper(".a-reviews-slider",{speed:500,loop:!0,prevButton:".a-reviews-nav-prev",nextButton:".a-reviews-nav-next",onInit:a,onSlideChangeStart:a});N.length&&$(window).on("resize",a),$(".mfp-link").magnificPopup({removalDelay:300,midClick:!0,mainClass:"mfp-anim",overflowY:"scroll",callbacks:{open:function(){$("html").addClass("moved"),$(".m-aside").css("right",e()),$(".m-content-home").css("right",e()+40)},close:function(){$("html").removeClass("moved"),$(".m-aside, .m-content-home").css("right","")}}});var O=$(".m-content-home"),Y=$(".home main");r(),$(window).on("resize",r);var A=$(".m-content-home"),G=$(".m-hi-down");$(window).on("scroll",function(){var e=$(this).scrollTop();e>=50?G.addClass("active"):G.removeClass("active"),e>=$(window).height()+40?A.addClass("hidden"):A.removeClass("hidden")}),G.on("click",function(e){$(window).scrollTop()>=50?E.animate({scrollTop:0},700):E.animate({scrollTop:$($(this).attr("href")).offset().top-250},700),e.preventDefault()});var J=$(".m-filter-toggle"),K=$(".m-filter-toggle-switchy");J.each(function(){var e=($(this).find(".m-filter-toggle-trigger"),$(this).find('input[type="radio"]:first-of-type')),t=$(this).find('input[type="radio"]:last-of-type'),i=$(this).find(".m-filter-toggle-switchy");i.on("change",function(){"left"==$(this).val()?(e.prop("checked",!0),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:last").hide(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:first").show()):"right"==$(this).val()?(t.prop("checked",!0),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:first").hide(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:last").show()):(e.prop("checked",!1),t.prop("checked",!1),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:first").hide(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:last").hide())}),e.on("change",function(){i.val("left").change(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:last").hide(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:first").show()}),t.on("change",function(){i.val("right").change(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:first").hide(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:last").show()}),e.is(":checked")?(i.val("left").change(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:last").hide(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:first").show()):t.is(":checked")&&(i.val("right").change(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:first").hide(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:last").show())}),K.switchy();var Q=$(".js-similar-list");Q.each(c),$(window).on("resize",function(){Q.each(c)}),Q.perfectScrollbar()});
