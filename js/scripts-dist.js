$(document).ready(function(){function e(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var i=document.createElement("div");i.style.width="100%",e.appendChild(i);var s=i.offsetWidth;return e.parentNode.removeChild(e),t-s}function t(){Modernizr.mq("(min-width: 590px)")||h.hasClass("active")?f.show():f.hide()}function i(){$(this).hasClass("range")||$(this).parent().find(".sod_list_wrapper").css("top",-$(this).parent().find(".sod_option.selected").position().top),$(this).val()?$(this).parent().addClass("selected"):$(this).parent().removeClass("selected")}function s(){M.text(q.activeIndex+1+"/"+q.slides.length)}function n(){Modernizr.mq("(min-width: 590px)")?B.css("height",$(window).height()-150):B.css("height","")}function o(){var e=$(".swiper-slide-active .a-review").height();$(".a-reviews-slider").css("height",e)}function l(){P.css(Modernizr.mq("(min-width: 590px)")?{height:$(window).height()-r.height()-40}:{height:$(window).height()-r.height()})}FastClick.attach(document.body),$("input, textarea").placeholder(),$("input[type=tel]").mask("+9 (999) 999-99-99"),$("input[type=tel]").on("focus",function(){$(this).addClass("ie-tel")}),$("input[type=tel]").on("change keyup paste",function(){$(this).removeClass("ie-tel")}),$(".validate-form").validate({errorClass:"invalid",validClass:"valid",errorElement:"em",onfocusout:function(e){$(e).valid()},highlight:function(e,t,i){$(e).addClass(t).removeClass(i),$(e).parent().addClass(t).removeClass(i)},unhighlight:function(e,t,i){$(e).removeClass(t).addClass(i),$(e).parent().removeClass(t).addClass(i)},ignore:".ignore"});var a=$("input, textarea");a.on("focus blur",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),a.each(function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")});var r=$("header"),d=$("#h-burger"),c=$("#h-burger-nav");d.on("click",function(){r.toggleClass("active"),$(this).toggleClass("active"),c.toggleClass("active")});var h=$("#m-burger"),f=$("#m-burger-nav");t(),h.on("click",function(){$(this).toggleClass("active"),f.slideToggle()}),$(window).on("resize",t);var g=$("main"),v=$("#m-aside-toggle"),m=$(".m-aside");v.on("click",function(){$(this).toggleClass("active"),m.toggleClass("hidden"),g.toggleClass("aside-yes aside-no"),setTimeout(function(){window.dispatchEvent(new Event("resize"))},500)});var p=$(".m-header-sections").find("a.active"),u=$(".m-header-search-toggle");u.on("click",function(e){$(this).toggleClass("active"),p.toggleClass("inactive"),e.preventDefault()});var w=$(".nano");w.nanoScroller(),$(".wrapper select").selectOrDie({size:5,onChange:i}).each(i);var C=$(".m-filter-range");C.each(function(){var e=$(this).find(".m-filter-range-field"),t=($(this).find(".range"),$(this).find(".range-from")),i=$(this).find(".range-to"),s=$(this).find(".sod_select");e.on("click",function(){$(this).hasClass("active")?($(".m-filter-range-field").removeClass("active"),$(".sod_select").removeClass("visible"),s.removeClass("visible")):($(".m-filter-range-field").removeClass("active"),$(this).addClass("active"),$(".sod_select").removeClass("visible"),s.addClass("visible")),s.removeClass("touch")}),t.on("change",function(){e.find(".from").text($(this).find("option:selected").text())}),i.on("change",function(){e.find(".to").text($(this).find("option:selected").text()),s.removeClass("visible")}),e.find(".from").text(t.find("option:selected").text()),e.find(".to").text(i.find("option:selected").text())});var x=$(".m-filters-more"),b=$(".m-mobile-hidden");x.on("click",function(){$(this).toggleClass("active"),b.slideToggle(),$(this).text($(this).hasClass("active")?"Меньше параметров":"Больше параметров")}),$(window).on("resize",function(){Modernizr.mq("(min-width: 590px)")?(k.slideDown(),b.slideDown()):k.css("display","")});var y=$(".m-aside-tabs").find("a"),k=$(".m-aside-tabs-content");y.on("click",function(e){$(this).hasClass("active")?(y.removeClass("active"),k.slideUp()):($(this).addClass("active").siblings().removeClass("active"),k.slideUp(),$($(this).attr("href")).slideToggle()),e.preventDefault()});var z=$(".scroll-btn"),T=$("html, body");z.on("click",function(e){T.animate({scrollTop:$($(this).attr("href")).offset().top-100},800),e.preventDefault()});var q=new Swiper(".gallery-main",{resistanceRatio:0,prevButton:".gallery-nav-btn-prev",nextButton:".gallery-nav-btn-next"}),D=$(".gallery-thumbs"),S=D.find(".thumb"),M=$(".gallery-counter");D.length&&(q.on("onSlideChangeStart",function(e){S.eq(q.activeIndex).addClass("active").siblings().removeClass("active"),S.eq(q.activeIndex).attr("id","active-thumb").siblings().attr("id",""),D.find(".nano-content").stop().animate({scrollTop:$("#active-thumb").get(0).offsetTop-10},500,"swing"),s()}),S.on("click",function(){var e=$(this).index();q.slideTo(e)}),s());var B=$(".gallery");n(),$(window).on("resize",n);var _=$(".tile-slider");_.each(function(){new Swiper(this,{loop:!0,nextButton:$(this).parent().find(".tile-slider-next")[0],prevButton:$(this).parent().find(".tile-slider-prev")[0]})});var I=$("section").find("h2"),E=$("section").find(".s-content");Modernizr.mq("(min-width: 590px)")?E.show():E.hide(),I.on("click",function(){Modernizr.mq("(min-width: 590px)")||($(this).toggleClass("active"),$(this).next(".s-content").slideToggle())}),$(window).on("resize",function(){Modernizr.mq("(min-width: 590px)")?E.show():E.hide()}),$(".mfp-link").magnificPopup({removalDelay:300,midClick:!0,mainClass:"mfp-anim",overflowY:"scroll",callbacks:{open:function(){$("html").addClass("moved"),$(".m-aside").css("right",e())},close:function(){$("html").removeClass("moved"),$(".m-aside").css("right","")}}});var U=$(".a-reviews-slider");new Swiper(".a-reviews-slider",{speed:500,loop:!0,prevButton:".a-reviews-nav-prev",nextButton:".a-reviews-nav-next",onInit:o,onSlideChangeStart:o});U.length&&$(window).on("resize",o);var P=$(".m-content-home");P.css("height",$(window).height()),l(),$(window).on("resize",l);var F=$(".m-hi-wrapper"),O=$(".m-hi-down");$(window).on("scroll",function(){var e=$(this).scrollTop();e>=50?(F.addClass("hidden"),O.addClass("active")):(F.removeClass("hidden"),O.removeClass("active"))}),O.on("click",function(e){$(window).scrollTop()>=50?T.animate({scrollTop:0},700):T.animate({scrollTop:$($(this).attr("href")).offset().top-250},700),e.preventDefault()});var R=$(".m-filter-toggle");R.each(function(){var e=$(this).find(".m-filter-toggle-trigger"),t=$(this).find('input[type="radio"]:first-of-type'),i=$(this).find('input[type="radio"]:last-of-type');e.on("click",function(){$(this).hasClass("left")?($(this).removeClass("left").addClass("right"),i.prop("checked",!0),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:first").hide(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:last").show()):($(this).removeClass("right").addClass("left"),t.prop("checked",!0),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:last").hide(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:first").show())}),t.on("change",function(){e.removeClass("right").addClass("left"),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:last").hide(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:first").show()}),i.on("change",function(){e.removeClass("left").addClass("right"),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:first").hide(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:last").show()}),t.is(":checked")?(e.addClass("left"),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:last").hide(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:first").show()):i.is(":checked")&&(e.addClass("right"),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:first").hide(),$(this).closest(".m-filters-row").find(".m-filter-toggle-content:last").show())})});
